# 4.1 語法

## 基本語法

一、以下語法當中的**第一個 then** 的箭頭函式：得到的是一個 **Response 的物件**，主要包含**表頭資訊(headers)**，主要是用來**判斷跟遠端的伺服器是不是連線都正常**(使用 **`res.ok`** 來判斷)。如果 res.ok 得到 true，再透過 **`res.json()`** 函式，來解析後端的資料，然後資料會帶到下一個 then。

二、**第二個 then** 的箭頭函式：**`data`** 印出來看，會得到後端回傳的資料。



### 串接 API 類型為 GET

```javascript
fetch("API 網址").then((res) => {
  if(res.ok){
    return res.json();
  }
}).then((data) => {
  console.log(data); // 後端回傳的資料，這裡取得
}).catch((err) => { // 若有發生什麼錯誤，就會執行 catch 裡的程式
  console.log(err);
});
```



### 串接 API 類型為非 GET

與上例的差異，只在於代入第二個參數：

```javascript
fetch("API 網址", {
  method: "POST", // POST | PUT | PATCH | DELETE
  body: 資料, // 欲傳送的資料
  //headers: {
  //  "Content-Type": "application/json;charset=utf-8"
  //}
}).then // 這裡省略不寫，同上述 GET 的部份。
```

body 常用的資料格式：

* JSON 格式字串化：Content-Type 需**手動**設定 「 **`application/json;charset=utf-8`** 」。
* **`FormData`**：Content-Type 會自動是 「 **`multipart/form-data`** 」。
* **`URLSearchParams`**：Content-Type 會自動是 「 **`x-www-form-urlencoded`** 」。



## async 與 await

只能在 **ESM 模組**或 **async function** 當中使用。



